(function(e){function t(t){for(var a,o,i=t[0],u=t[1],c=t[2],m=0,p=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var u=r[i];0!==n[u]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a,n,s=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Header"),r("router-view")],1)},i=[],u=r("2909"),c=(r("96cf"),r("1da1")),l=r("5530"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",{staticClass:"top"},[a("nav",{staticClass:"nav"},[a("div",{staticClass:"nav__section nav__section--pages"},[a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link nav__link--logo",attrs:{to:{name:"Home"}}},[a("img",{attrs:{src:r("9d64"),alt:""}})])],1),e.$store.state.isAdmin?a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link",attrs:{to:{name:"AddBook"}}},[e._v(" Add book ")])],1):e._e()]),a("div",{staticClass:"nav__section nav__section--user"},[e.$store.state.isUserLoggedIn?e._e():a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link",attrs:{to:{name:"Register"}}},[e._v(" Register ")])],1),e.$store.state.isUserLoggedIn?e._e():a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link",attrs:{to:{name:"Login"}}},[e._v(" Login ")])],1),e.$store.state.isUserLoggedIn?a("li",{staticClass:"nav__item",on:{click:e.logout}},[a("router-link",{staticClass:"nav__link",attrs:{to:"/logout"}},[e._v(" Logout ")])],1):e._e(),e.$store.state.isUserLoggedIn?a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link",attrs:{to:"/account"}},[e._v(" Account ")])],1):e._e(),a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link nav__link--cart",attrs:{to:"/shoppingcart"}},[a("div",{staticClass:"cart"},[a("div",{staticClass:"items__num"},[e._v(e._s(e.cartItemsLength()))]),a("img",{attrs:{src:r("ec17"),alt:"shopping cart"}})])])],1)])])])])},p=[],d=r("2f62"),v={name:"Header",methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(d["b"])(["removeUser"])),Object(d["c"])(["cartItemsLength"])),{},{logout:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.removeUser(),e.$router.push({name:"Home"});case 2:case"end":return t.stop()}}),t)})))()}}),data:function(){return{}}},g=v,f=r("2877"),b=Object(f["a"])(g,m,p,!1,null,null,null),_=b.exports,h=r("bc3a"),k=r.n(h),x=function(){return k.a.create({baseURL:"http://localhost:7000/api/",headers:{"Content-type":"application/json"}})},w={register:function(e){return x().post("/register",e)},login:function(e){return x().post("/login",e)},isLoggedIn:function(){return x().get("/user")},logout:function(){return x().get("/logout")},updateAccount:function(e){return x().post("/account",e)}},y={components:{Header:_},methods:Object(l["a"])({},Object(d["b"])(["setUser"])),created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.isLoggedIn();case 3:if(r=t.sent,!r.data.user){t.next=7;break}return t.next=7,e.setUser(r.data.user);case 7:e.$store.state.cartItems=Object(u["a"])(JSON.parse(localStorage.getItem("items"))),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0.message);case 13:console.log(e.$store.state.isAdmin);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},C=y,O=(r("5c0b"),Object(f["a"])(C,o,i,!1,null,null,null)),j=O.exports,P=r("8c4f"),N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("h1",{staticClass:"title"},[e._v("Books")]),r("div",{staticClass:"books"},e._l(e.books,(function(e){return r("Card",{key:e._id,staticClass:"book",attrs:{book:e}})})),1)])},I=[],B={addBook:function(e){return x().post("/books",e,{"Content-Type":"multipart/form-data"})},editBook:function(e){var t=e.formData,r=e.id;return x().put("/book/".concat(r),t,{"Content-Type":"multipart/form-data"})},deleteBook:function(e){return x().delete("/books/".concat(e))},getBooks:function(){return x().get("/books")},getBook:function(e){return x().get("/books/".concat(e))}},S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"book__hero"},[a("router-link",{attrs:{to:"/books/"+e.book._id}},[a("img",{attrs:{src:"./uploads/"+(e.book.photo||"book.png")+" ",alt:"book photo"}})])],1),a("div",{staticClass:"book__details"},[a("div",{staticClass:"book__name"},[a("router-link",{attrs:{to:"/books/"+e.book._id}},[a("span",[e._v(e._s(e.book.name))])])],1),a("div",{staticClass:"book__author"},[a("span",[e._v(e._s(e.book.author))])]),a("div",{staticClass:"book__price"},[a("span",[e._v(e._s(e.book.price)+" RSD")])]),e.$store.state.isAdmin?a("div",{staticClass:"edit"},[a("router-link",{attrs:{to:"/books/"+e.book._id+"/edit"}},[a("img",{attrs:{src:r("c2d1"),alt:""}})])],1):e._e()])])},R=[],$={name:"Card",props:{book:Object}},q=$,z=Object(f["a"])(q,S,R,!1,null,null,null),A=z.exports,E={name:"Books",components:{Card:A},data:function(){return{books:[]}},methods:{},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.getBooks();case 2:r=t.sent,e.books=r.data,console.log(e.books);case 5:case"end":return t.stop()}}),t)})))()}},U=E,L=Object(f["a"])(U,N,I,!1,null,null,null),T=L.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("form",{staticClass:"form card",attrs:{action:"/register"},on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("h2",[e._v("Register")]),r("label",{attrs:{for:"name"}},[e._v("Name*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("label",{attrs:{for:"surname"}},[e._v("Surname*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.surname,expression:"surname"}],attrs:{type:"text",name:"surname",required:""},domProps:{value:e.surname},on:{input:function(t){t.target.composing||(e.surname=t.target.value)}}}),r("label",{attrs:{for:"email"}},[e._v("Email*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("City*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.city,expression:"city"}],attrs:{type:"text",name:"city",required:""},domProps:{value:e.city},on:{input:function(t){t.target.composing||(e.city=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("Zip Code*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.zip,expression:"zip"}],attrs:{type:"text",name:"zip",required:""},domProps:{value:e.zip},on:{input:function(t){t.target.composing||(e.zip=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("Street*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.street,expression:"street"}],attrs:{type:"text",name:"street",required:""},domProps:{value:e.street},on:{input:function(t){t.target.composing||(e.street=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("Street number*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.street_number,expression:"street_number"}],attrs:{type:"text",name:"street_number",required:""},domProps:{value:e.street_number},on:{input:function(t){t.target.composing||(e.street_number=t.target.value)}}}),r("label",{attrs:{for:"password"}},[e._v("Password*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("label",{attrs:{for:"password-confirm"}},[e._v("Confirm Password*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirm_password,expression:"confirm_password"}],attrs:{type:"password",name:"password-confirm",required:""},domProps:{value:e.confirm_password},on:{input:function(t){t.target.composing||(e.confirm_password=t.target.value)}}}),r("input",{staticClass:"button save",attrs:{type:"submit",value:"Register",name:"register"}})])])},F=[],H=(r("b0c0"),{name:"Register",data:function(){return{name:"",surname:"",email:"",city:"",zip:"",street:"",street_number:"",password:"",confirm_password:"",error:null}},methods:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["setUser"])),{},{register:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.register({name:e.name,surname:e.surname,email:e.email,city:e.city,zip:e.zip,street:e.street,streetNumber:e.street_number,password:e.password,"password-confirm":e.confirm_password});case 3:r=t.sent,console.log(r.data),200===r.status&&(e.setUser(r.data.user),e.$router.push({name:"Home"})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),computed:Object(l["a"])({},Object(d["d"])(["user","isUserLoggedIn"]))}),J=H,M=Object(f["a"])(J,D,F,!1,null,null,null),G=M.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("form",{staticClass:"form card",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("h2",[e._v("Login")]),r("label",{attrs:{for:"email"}},[e._v("Email*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",name:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("label",{attrs:{for:"password"}},[e._v("Password*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("input",{staticClass:"button save",attrs:{type:"submit",value:"Log In",name:"login"}})])])},Z=[],Y={name:"Login",data:function(){return{email:"",password:"",error:null}},methods:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["setUser"])),{},{login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.login({email:e.email,password:e.password});case 3:r=t.sent,200===r.status&&(e.setUser(r.data.user),e.$router.push({name:"Home"})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}})},Q=Y,V=Object(f["a"])(Q,K,Z,!1,null,null,null),W=V.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("form",{staticClass:"form card",on:{submit:function(t){return t.preventDefault(),e.addBook(t)}}},[r("h2",[e._v("Add Book")]),r("label",{attrs:{for:"name"}},[e._v("Name*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("label",{attrs:{for:"genre"}},[e._v("Genre*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.genre,expression:"genre"}],attrs:{type:"text",name:"genre",required:""},domProps:{value:e.genre},on:{input:function(t){t.target.composing||(e.genre=t.target.value)}}}),r("label",{attrs:{for:"photo"}},[e._v("Photo")]),r("input",{attrs:{type:"file",name:"photo"},on:{change:e.onFileSelected}}),r("label",{attrs:{for:"author"}},[e._v("Author*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.author,expression:"author"}],attrs:{type:"text",name:"author",required:""},domProps:{value:e.author},on:{input:function(t){t.target.composing||(e.author=t.target.value)}}}),r("label",{attrs:{for:"publisher"}},[e._v("Publisher")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.publisher,expression:"publisher"}],attrs:{type:"text",name:"publisher",required:""},domProps:{value:e.publisher},on:{input:function(t){t.target.composing||(e.publisher=t.target.value)}}}),r("label",{attrs:{for:"description"}},[e._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{name:"description",id:"",cols:"30",rows:"10"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),r("label",{attrs:{for:"price"}},[e._v("Price")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number",name:"price",required:""},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}}),r("input",{staticClass:"button save",attrs:{type:"submit",value:"Add Book",name:"add"}})])])},ee=[],te=(r("a4d3"),r("e01a"),r("5a30")),re=r.n(te),ae={name:"AddBook",data:function(){return{name:"",genre:"",author:"",publisher:"",description:"",price:"",SelectedFile:""}},methods:{onFileSelected:function(e){this.SelectedFile=e.target.files[0]},addBook:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=new re.a,r.append("file",e.SelectedFile),r.append("name",e.name),r.append("genre",e.genre),r.append("author",e.author),r.append("publisher",e.publisher),r.append("description",e.description),r.append("price",e.price),t.next=11,B.addBook(r);case 11:a=t.sent,200===a.status&&e.$router.push({name:"Home"}),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()}}},ne=ae,se=Object(f["a"])(ne,X,ee,!1,null,null,null),oe=se.exports,ie={},ue=Object(f["a"])(ie,a,n,!1,null,null,null),ce=ue.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.book?a("div",{staticClass:"inner"},[a("div",{staticClass:"single"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.book.photo,expression:"book.photo"}],staticClass:"single__image"},[a("img",{attrs:{src:"/uploads/"+(e.book.photo||"book.png")+" ",alt:"book photo"}})]),a("div",{staticClass:"single__details"},[a("div",{staticClass:"single__name"},[a("h1",[e._v(e._s(e.book.name))])]),a("div",{staticClass:"single__info"},[a("p",[e._v("Author: "+e._s(e.book.author))])]),a("div",{staticClass:"single__info"},[a("p",[e._v("Genres: "+e._s(e.book.genre))])]),a("div",{staticClass:"single__info"},[a("p",[e._v("Publisher: "+e._s(e.book.publisher))])]),a("div",{staticClass:"single__description"},[a("p",[e._v(e._s(e.book.description))])]),a("div",{staticClass:"single__price"},[a("p",[e._v(e._s(e.book.price)+" RSD")])]),a("div",{ref:"addBtn",staticClass:"addBtn",on:{click:e.addToCart}},[e._v(" Add to cart ")]),e.$store.state.isAdmin?a("div",{staticClass:"edit"},[a("router-link",{attrs:{to:"/books/"+e.book._id+"/edit"}},[a("img",{attrs:{src:r("c2d1"),alt:""}})])],1):e._e()])])]):e._e()},me=[],pe={name:"Book",data:function(){return{book:null}},methods:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["addBook"])),{},{addToCart:function(){this.addBook(this.book)}}),mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getBook(e.$route.params.id);case 3:r=t.sent,200===r.status&&(e.book=r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},de=pe,ve=Object(f["a"])(de,le,me,!1,null,null,null),ge=ve.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("div",{staticClass:"shopping_cart"},[r("div",{staticClass:"title"},[e._v("Your cart")]),0===e.items.length?r("div",{staticClass:"emptyCart"},[r("span",[e._v("Cart is empty")])]):e._e(),0===e.items.length?r("div",{staticClass:"backToShop",on:{click:e.backToStore}},[e._v(" Back to shop ")]):e._e(),e._l(e.items,(function(t,a){return r("div",{key:a,staticClass:"cart_item"},[r("div",{staticClass:"cart_item__img"},[r("img",{attrs:{src:"/uploads/"+(t.photo||"book.png"),alt:"book photo"}})]),r("div",{staticClass:"cart_item__price"},[r("div",[e._v(e._s(t.price)+" RSD")])]),r("div",{staticClass:"cart_item__remove"},[r("div",{staticClass:"removeBtn",on:{click:function(t){return e.removeItem(a)}}},[e._v("Remove")])])])})),0!==e.items.length?r("div",{staticClass:"total"},[r("span",[e._v("Total:")]),r("span",{staticClass:"total__price"},[e._v(e._s(e.cartTotalPrice())+" RSD")])]):e._e(),0!==e.items.length?r("div",{staticClass:"title"},[e._v(" Shipping Address ")]):e._e(),0!==e.items.length?r("OrderForm",{key:e.componentKey,attrs:{userInfo:e.user,items:e.items}}):e._e()],2)])},be=[],_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"card form__cart",on:{submit:function(t){return t.preventDefault(),e.confirmOrder(t)}}},[r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"name"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"surname"}},[e._v("Surname")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.surname,expression:"surname"}],attrs:{type:"text",name:"surname",required:""},domProps:{value:e.surname},on:{input:function(t){t.target.composing||(e.surname=t.target.value)}}})]),r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"email"}},[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"text"}},[e._v("City:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.city,expression:"city"}],attrs:{type:"text",name:"city",required:""},domProps:{value:e.city},on:{input:function(t){t.target.composing||(e.city=t.target.value)}}})]),r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"text"}},[e._v("Zip Code:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.zip,expression:"zip"}],attrs:{type:"text",name:"zip",required:""},domProps:{value:e.zip},on:{input:function(t){t.target.composing||(e.zip=t.target.value)}}})]),r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"text"}},[e._v("Street:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.street,expression:"street"}],attrs:{type:"text",name:"street",required:""},domProps:{value:e.street},on:{input:function(t){t.target.composing||(e.street=t.target.value)}}})]),r("div",{staticClass:"form__block"},[r("label",{attrs:{for:"text"}},[e._v("Street number:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.street_number,expression:"street_number"}],attrs:{type:"text",name:"street_number",required:""},domProps:{value:e.street_number},on:{input:function(t){t.target.composing||(e.street_number=t.target.value)}}})]),r("input",{ref:"addBtn",staticClass:"confirm_order",attrs:{type:"submit",value:"Confirm"}})])},he=[],ke={sendOrder:function(e){return x().post("/order",e)}},xe={name:"AddressForm",props:{userInfo:Object,items:Array},data:function(){return{name:"",surname:"",email:"",city:"",zip:"",street:"",street_number:"",total:""}},methods:Object(l["a"])(Object(l["a"])({},Object(d["c"])(["cartTotalPrice"])),{},{confirmOrder:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.total=e.cartTotalPrice(),t.prev=1,t.next=4,ke.sendOrder({items:e.items,name:e.name,surname:e.surname,email:e.email,city:e.city,zip:e.zip,street:e.street,streetNumber:e.street_number,total:e.total});case 4:r=t.sent,200===r.status&&(e.$store.state.cartItems=[],localStorage.setItem("items",JSON.stringify([])),e.$router.push({name:"Books"})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}),mounted:function(){null!==this.userInfo&&(this.name=this.userInfo.name,this.surname=this.userInfo.surname,this.email=this.userInfo.email,this.phone=this.userInfo.phone,this.city=this.userInfo.city,this.zip=this.userInfo.zip,this.street=this.userInfo.street,this.street_number=this.userInfo.streetNumber)}},we=xe,ye=Object(f["a"])(we,_e,he,!1,null,null,null),Ce=ye.exports,Oe={name:"ShoppingCart",components:{OrderForm:Ce},data:function(){return{items:[],componentKey:0}},computed:Object(l["a"])({},Object(d["d"])(["user"])),methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(d["c"])(["cartTotalPrice"])),Object(d["b"])(["removeBook"])),{},{backToStore:function(){this.$router.push({name:"Home"})},removeItem:function(e){this.removeBook(e)}}),created:function(){var e=this;this.$store.state.cartItems=Object(u["a"])(JSON.parse(localStorage.getItem("items"))),this.items=this.$store.state.cartItems,setTimeout((function(){e.componentKey+=1}),500)},mounted:function(){this.items=this.$store.state.cartItems}},je=Oe,Pe=Object(f["a"])(je,fe,be,!1,null,null,null),Ne=Pe.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("form",{staticClass:"form card",attrs:{action:"/register"},on:{submit:function(t){return t.preventDefault(),e.edit(t)}}},[r("h2",[e._v("Edit Account")]),r("label",{attrs:{for:"name"}},[e._v("Name*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("label",{attrs:{for:"surname"}},[e._v("Surname*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.surname,expression:"surname"}],attrs:{type:"text",name:"surname",required:""},domProps:{value:e.surname},on:{input:function(t){t.target.composing||(e.surname=t.target.value)}}}),r("label",{attrs:{for:"email"}},[e._v("Email*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("City*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.city,expression:"city"}],attrs:{type:"text",name:"city",required:""},domProps:{value:e.city},on:{input:function(t){t.target.composing||(e.city=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("Zip Code*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.zip,expression:"zip"}],attrs:{type:"text",name:"zip",required:""},domProps:{value:e.zip},on:{input:function(t){t.target.composing||(e.zip=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("Street*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.street,expression:"street"}],attrs:{type:"text",name:"street",required:""},domProps:{value:e.street},on:{input:function(t){t.target.composing||(e.street=t.target.value)}}}),r("label",{attrs:{for:"text"}},[e._v("Street number*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.street_number,expression:"street_number"}],attrs:{type:"text",name:"street_number",required:""},domProps:{value:e.street_number},on:{input:function(t){t.target.composing||(e.street_number=t.target.value)}}}),r("input",{staticClass:"button save",attrs:{type:"submit",value:"Edit",name:"edit"}})])])},Be=[],Se={name:"Account",data:function(){return{name:"",surname:"",email:"",city:"",zip:"",street:"",street_number:"",error:null}},methods:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["setUser"])),{},{edit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.updateAccount({id:e.user._id,name:e.name,surname:e.surname,email:e.email,city:e.city,zip:e.zip,street:e.street,streetNumber:e.street_number});case 3:r=t.sent,200===r.status&&e.setUser(r.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}),computed:Object(d["d"])(["user"]),mounted:function(){this.name=this.user.name,this.surname=this.user.surname,this.email=this.user.email,this.phone=this.user.phone,this.city=this.user.city,this.zip=this.user.zip,this.street=this.user.street,this.street_number=this.user.streetNumber}},Re=Se,$e=Object(f["a"])(Re,Ie,Be,!1,null,null,null),qe=$e.exports,ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner"},[r("form",{staticClass:"form card",on:{submit:function(t){return t.preventDefault(),e.editBook(t)}}},[r("h2",[e._v("Edit Book")]),r("label",{attrs:{for:"name"}},[e._v("Name*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("label",{attrs:{for:"genre"}},[e._v("Genre*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.genre,expression:"genre"}],attrs:{type:"text",name:"genre",required:""},domProps:{value:e.genre},on:{input:function(t){t.target.composing||(e.genre=t.target.value)}}}),r("label",{attrs:{for:"photo"}},[e._v("Photo")]),r("input",{attrs:{type:"file",name:"photo"},on:{change:e.onFileSelected}}),r("label",{attrs:{for:"author"}},[e._v("Author*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.author,expression:"author"}],attrs:{type:"text",name:"author",required:""},domProps:{value:e.author},on:{input:function(t){t.target.composing||(e.author=t.target.value)}}}),r("label",{attrs:{for:"publisher"}},[e._v("Publisher")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.publisher,expression:"publisher"}],attrs:{type:"text",name:"publisher",required:""},domProps:{value:e.publisher},on:{input:function(t){t.target.composing||(e.publisher=t.target.value)}}}),r("label",{attrs:{for:"description"}},[e._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{name:"description",id:"",cols:"30",rows:"10"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),r("label",{attrs:{for:"price"}},[e._v("Price")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number",name:"price",required:""},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}}),r("input",{staticClass:"button save",attrs:{type:"submit",value:"Edit Book",name:"add"}}),r("button",{staticClass:"button save",on:{click:e.deleteBook}},[e._v(" Delete Book ")])])])},Ae=[],Ee={name:"EditBook",data:function(){return{name:"",genre:"",author:"",publisher:"",description:"",price:"",photo:"",book:null}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.getBook(e.$route.params.id);case 3:r=t.sent,200===r.status&&(a=r.data,e.book=a,e.name=a.name,e.author=a.author,e.publisher=a.publisher,e.description=a.description,e.price=a.price,e.genre=a.genre,e.photo=a.photo),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},methods:{onFileSelected:function(e){this.SelectedFile=e.target.files[0]},editBook:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=new re.a,r.append("file",e.SelectedFile),r.append("name",e.name),r.append("author",e.author),r.append("publisher",e.publisher),r.append("description",e.description),r.append("price",e.price),r.append("genre",e.genre),r.append("photo",e.photo),a={formData:r,id:e.book._id},t.next=13,B.editBook(a);case 13:n=t.sent,200===n.status&&e.$router.push("/books/".concat(e.book._id)),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},deleteBook:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.deleteBook(e.book._id);case 3:r=t.sent,200===r.status&&e.$router.push({name:"Home"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},Ue=Ee,Le=Object(f["a"])(Ue,ze,Ae,!1,null,null,null),Te=Le.exports,De={user:null,isUserLoggedIn:!1,isAdmin:!1,cartItems:[]},Fe=(r("a434"),{setUser:function(e,t){e.user=t,e.isUserLoggedIn=!0,console.log(),e.isAdmin=t.isAdmin},logout:function(e){e.user=null,e.isUserLoggedIn=!1,e.isAdmin=!1},addToCart:function(e,t){e.cartItems.push(t),localStorage.setItem("items",JSON.stringify(e.cartItems))},removeFromCart:function(e,t){e.cartItems.splice(t,1),localStorage.setItem("items",JSON.stringify(e.cartItems))}}),He={setUser:function(e,t){var r=e.commit;r("setUser",t)},removeUser:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,w.logout();case 4:t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0.message);case 10:r("logout");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},addBook:function(e,t){var r=e.commit;r("addToCart",t)},removeBook:function(e,t){var r=e.commit;r("removeFromCart",t)}},Je=(r("13d5"),{cartItemsLength:function(e){return e.cartItems.length},cartTotalPrice:function(e){return e.cartItems.reduce((function(e,t){return e+t.price}),0)}});s["a"].use(d["a"]);var Me=new d["a"].Store({state:De,mutations:Fe,actions:He,getters:Je});s["a"].use(P["a"]);var Ge=[{path:"/",name:"Home",component:T},{path:"/register",name:"Register",component:G},{path:"/login",name:"Login",component:W},{path:"/account",name:"Account",beforeEnter:Ke,component:qe},{path:"/books",name:"Books",component:ce},{path:"/books/:id",name:"Book",component:ge},{path:"/addbook",name:"AddBook",beforeEnter:Ze,component:oe},{path:"/books/:id/edit",name:"EditBook",beforeEnter:Ze,component:Te},{path:"/shoppingcart",name:"ShoppingCart",component:Ne}];function Ke(e,t,r){Me.state.isUserLoggedIn?r():r({path:"/login"})}function Ze(e,t,r){Me.state.isAdmin?r():r({path:"/"})}var Ye=new P["a"]({mode:"history",base:"/",routes:Ge}),Qe=Ye;r("a41b");s["a"].config.productionTip=!1,new s["a"]({router:Qe,store:Me,render:function(e){return e(j)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"9c0c":function(e,t,r){},"9d64":function(e,t,r){e.exports=r.p+"img/logo.c5089539.png"},a41b:function(e,t,r){},c2d1:function(e,t,r){e.exports=r.p+"img/pencil.1832bfce.png"},ec17:function(e,t,r){e.exports=r.p+"img/cart.ad513d77.png"}});
//# sourceMappingURL=app.9e33860a.js.map